<!DOCTYPE html>
<html data-theme="light"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta name="description" content="Testing compression programs 2">
    <meta name="keywords" content="linux, macos, compression, zstd, gzip, bzip2, xz">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"/>
    <link href="/css/main.css" rel="stylesheet"/>
    <title>Revisiting the zstd compression algorithm ~ MOK&#39;s Onomatomaniske Kaos</title>
</head>
<body><header data-theme="dark" >
  <span id="header__title">
    MOK&#39;s Onomatomaniske Kaos
  </span>
  <div id="header__subtitle">
        Super Cool
  </div><nav class="site-nav">
  <ul class="main-menu">
    
    <li>
      <a href="/"  data-theme="dark" class="contrast">Home</a>
    </li>
    
    <li>
      <a href="/posts"  data-theme="dark" class="contrast">Posts</a>
    </li>
    
    <li>
      <a href="/color-hexcodes"  data-theme="dark" class="contrast">Hexcodes</a>
    </li>
    
    <li>
      <a href="/about"  data-theme="dark" class="contrast">About</a>
    </li>
    
  </ul>
</nav>
</header>
<div id="content">
<main class=container>
  <div class="grid">
    <div class="article__title">
      <h2>Revisiting the zstd compression algorithm</h2>
    </div>

    <div class="article__categories"><span><i class="fa fa-list"></i></span>
      <a class="article__category" href="/categories/linux">Linux</a>
    </div> 

  </div> 

  
    <div class="article__date">2025-04-14 19:42</div>
  
  <div class="article__author">Morten Kjeldgaard</div>

  <hr />
  <div class="content">
    <p>A few days ago, <a href="/posts/2025-04-07-testing-compression-algorithms/">I wrote about various compression algorithms</a> and how they perform. Today, I am looking further into the 19 different compression levels available in <code>zstd</code>. I ran the experiment in exactly the same way, using the same cpio archive and the same computer.</p>
<p><code>zstd</code> has 19 different compression levels, and in the experiment detailed below they are named &ldquo;zstd-1&rdquo;, &ldquo;zstd-2&rdquo;, etc. up to &ldquo;zstd-19&rdquo;. For purposes of comparison, I have included results from <code>gzip</code>, <code>bzip2</code> and <code>xz</code> from last time.</p>
<p>The data is detailed is in the <a href="#table--data">table below</a>, but let&rsquo;s look at it in graphical form. In the graph below, I have plotted the compression time in seconds along the X-axis, and the size of the compressed file in percentage of the initial size along the Y-axis.</p>
<p>The left panel shows all the runs. At the top left the uncompressed file is indicated by a yellow dot at (0, 100). Then in green, all the <code>zstd</code> runs are shown. The result from <code>gzip</code> is shown with a blue dot, <code>bzip2</code> is magenta dot and <code>xz</code> is a red dot. The compression ratio drops very quickly and then flattens out almost in an L-shape.</p>
<p>In order to show some of the <code>zstd-*</code> results more clearly, the right panel shows a detail of the left panel, as indicated by the grey rectangle.</p>
<p>When advancing from level 1 to 4, <code>zstd</code> delivers increasingly better compression without much cost in terms of run-time. Levels 5-8 do not seem compress any better than level 4, but the execution time increases. The next performance jump comes at level 9 which seems to compress equally efficient to levels 10-16, that all require significantly longer run time. Levels 17-19 delivers a couple of percent better compression, again at the cost of run time.</p>
<p>It seems the default <code>zstd</code> level which is set at 3 is a decent compromise between compression ratio and run time. One could consider using level 4, or perhaps level 9 that seems to stand out.</p>
<img alt="Screenshot of terminal with fastfetch output" src="/img/results_2025-04-14-14-33.png"/>
<h2 id="here-s-the-data">Here&rsquo;s the data</h2>
<p><a id="table--data"></a></p>
<table>
<thead>
<tr>
<th>file</th>
<th>algorithm</th>
<th>size (Mb)</th>
<th>% size</th>
<th>time (s)</th>
<th>decomp (s)</th>
<th>speed (Mb/s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>archive.cpio</td>
<td></td>
<td>1171.3</td>
<td>100.0</td>
<td>0.0</td>
<td>0.0</td>
<td>inf</td>
</tr>
<tr>
<td>archive.cpio.gz</td>
<td>gzip</td>
<td>718.6</td>
<td>61.3</td>
<td>56.0</td>
<td>9.9  (19%)</td>
<td>12.8</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-1</td>
<td>705.3</td>
<td>60.2</td>
<td>6.8</td>
<td>2.9  (43%)</td>
<td>103.7</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-2</td>
<td>688.6</td>
<td>58.8</td>
<td>7.1</td>
<td>3.0  (42%)</td>
<td>97.0</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-3</td>
<td>672.7</td>
<td>57.4</td>
<td>9.5</td>
<td>2.9  (31%)</td>
<td>70.8</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-4</td>
<td>668.5</td>
<td>57.1</td>
<td>14.2</td>
<td>3.1  (22%)</td>
<td>47.1</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-5</td>
<td>670.7</td>
<td>57.3</td>
<td>24.9</td>
<td>3.0  (12%)</td>
<td>26.9</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-6</td>
<td>668.0</td>
<td>57.0</td>
<td>26.6</td>
<td>2.9  (11%)</td>
<td>25.1</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-7</td>
<td>658.5</td>
<td>56.2</td>
<td>34.5</td>
<td>3.0  (9%)</td>
<td>19.1</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-8</td>
<td>656.9</td>
<td>56.1</td>
<td>38.6</td>
<td>3.3  (10%)</td>
<td>17.0</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-9</td>
<td>635.8</td>
<td>54.3</td>
<td>50.1</td>
<td>3.1  (6%)</td>
<td>12.7</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-10</td>
<td>634.6</td>
<td>54.2</td>
<td>53.8</td>
<td>3.3  (6%)</td>
<td>11.8</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-11</td>
<td>634.2</td>
<td>54.1</td>
<td>73.2</td>
<td>3.2  (4%)</td>
<td>8.7</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-12</td>
<td>634.1</td>
<td>54.1</td>
<td>75.2</td>
<td>3.2  (4%)</td>
<td>8.4</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-13</td>
<td>634.2</td>
<td>54.1</td>
<td>152.3</td>
<td>3.3  (2%)</td>
<td>4.1</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-14</td>
<td>633.9</td>
<td>54.1</td>
<td>137.6</td>
<td>3.3  (2%)</td>
<td>4.6</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-15</td>
<td>633.4</td>
<td>54.1</td>
<td>159.2</td>
<td>3.3  (2%)</td>
<td>4.0</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-16</td>
<td>627.9</td>
<td>53.6</td>
<td>207.9</td>
<td>2.9  (1%)</td>
<td>3.0</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-17</td>
<td>609.5</td>
<td>52.0</td>
<td>300.6</td>
<td>3.3  (1%)</td>
<td>2.0</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-18</td>
<td>610.7</td>
<td>52.1</td>
<td>379.9</td>
<td>3.9  (1%)</td>
<td>1.6</td>
</tr>
<tr>
<td>archive.cpio.zst</td>
<td>zstd-19</td>
<td>606.1</td>
<td>51.7</td>
<td>476.6</td>
<td>4.8  (1%)</td>
<td>1.3</td>
</tr>
</tbody>
</table>
<hr>

  </div> 

  <div class="article__tags"><a class="article__tag" href="/tags/linux">#linux </a><a class="article__tag" href="/tags/macos">#macos </a><a class="article__tag" href="/tags/compression">#compression </a>
  </div> 
</main> 

        </div><footer data-theme="dark" >
  <span id="footer__title">
    Â© Morten Kjeldgaard, 2025
  </span>
</footer>
<script src="https://kit.fontawesome.com/e55e3b2e7b.js" crossorigin="anonymous"></script>
<script src="/js/main.js"></script>
</body>
</html>
